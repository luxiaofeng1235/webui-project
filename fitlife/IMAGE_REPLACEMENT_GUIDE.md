# 🎨 一键图片替换脚本使用指南

## 📋 脚本功能

`replace-all-homepage-images.sh` 是一个强大的一键图片替换脚本，具有以下特性：

### ✨ 核心功能
- 🔄 **一键替换** - 自动替换首页所有16张图片
- 🎨 **视觉多样化** - 确保每张图片风格不同
- 🛡️ **安全保护** - 自动备份原图片
- 🔍 **完整性验证** - 检查图片是否损坏
- 📊 **详细日志** - 记录所有操作过程
- 🔄 **失败恢复** - 自动恢复备份

### 📸 替换的图片类型
1. **Hero轮播图** (6张) - 不同风格的健身房场景
2. **设施展示图** (6张) - 各种设施区域
3. **环境画廊图** (4张) - 不同角度的环境展示

## 🚀 使用方法

### 基本使用
```bash
# 直接运行脚本
./replace-all-homepage-images.sh
```

### 高级选项
```bash
# 查看帮助
./replace-all-homepage-images.sh --help

# 仅替换特定类型的图片
./replace-all-homepage-images.sh --type hero
./replace-all-homepage-images.sh --type facilities
./replace-all-homepage-images.sh --type gallery
```

## 📊 脚本执行流程

### 1. 预检查阶段
- ✅ 检查网络连接
- ✅ 验证必要目录
- ✅ 创建备份目录

### 2. 备份阶段
- 📁 自动备份所有现有图片
- 🏷️ 使用时间戳命名备份目录
- 📋 记录备份操作日志

### 3. 下载阶段
- 📥 从Unsplash下载高质量图片
- 🔍 验证每张图片的完整性
- ⏱️ 30秒超时保护
- 📏 最小文件大小检查

### 4. 验证阶段
- 🔍 检查图片格式 (JPEG/PNG/WebP)
- 📐 验证图片尺寸
- 🛡️ 确保无损坏文件

### 5. 完成阶段
- 📊 生成详细统计报告
- 🔄 低成功率时提供恢复选项
- 🧹 清理临时文件

## 🎯 图片风格分配

### Hero轮播图 (6张)
```
1. 现代健身房全景 - 宽敞明亮的整体环境
2. 力量训练区特写 - 专业器械展示
3. 瑜伽课程场景 - 宁静的瑜伽环境
4. 跑步有氧训练 - 动感的有氧区域
5. 团体健身课程 - 活力四射的团体训练
6. 专业健身指导 - 教练指导场景
```

### 设施展示图 (6张)
```
1. 工业风力量训练区 - 黑色器械，工业风格
2. 明亮现代有氧区 - 白色现代，自然光线
3. 禅意瑜伽教室 - 木质地板，温馨氛围
4. 豪华私教区 - 高端定制，专业设备
5. 现代休息区 - 商务风格，舒适环境
6. 豪华更衣室 - 酒店级别，高端设施
```

### 环境画廊图 (4张)
```
1. 健身房全景 - 俯视角度的整体布局
2. 器械区域 - 器械排列的专业展示
3. 团体课程 - 课程进行中的动态场景
4. 接待区 - 温馨专业的服务环境
```

## 🛡️ 安全特性

### 自动备份
- 📁 备份目录: `images/backup-YYYYMMDD-HHMMSS/`
- 🔄 支持一键恢复
- 📋 备份操作日志记录

### 完整性检查
- 📏 最小文件大小: 10KB
- 🔍 文件格式验证
- 🛡️ 损坏文件自动跳过

### 错误处理
- ⏱️ 网络超时保护 (30秒)
- 🔄 下载失败自动重试
- 📊 详细错误日志

## 📋 使用示例

### 示例1: 完整替换
```bash
$ ./replace-all-homepage-images.sh

🎨 一键替换首页所有图片
================================
📋 将替换以下图片：
1. Hero轮播图 (6张)
2. 设施展示图 (6张)
3. 环境画廊图 (4张)
总计: 16张图片

📁 备份现有图片到: images/backup-20240706-143022
✅ 备份完成

🚀 开始替换图片...
1️⃣ 替换Hero轮播图...
✅ 成功替换: pexels-photo-1552242.webp
✅ 成功替换: pexels-photo-2261477.jpeg
...

📊 替换结果统计：
================================
总计图片: 16 张
成功替换: 15 张
失败数量: 1 张
成功率: 94%

🎉 图片替换完成！
```

### 示例2: 恢复备份
```bash
# 如果需要恢复备份
cp images/backup-20240706-143022/* images/
```

## 🔧 故障排除

### 常见问题

#### 1. 网络连接失败
```bash
❌ 网络连接失败，无法下载图片
```
**解决方案**: 检查网络连接，确保能访问 images.unsplash.com

#### 2. 权限问题
```bash
❌ 权限不足，无法写入文件
```
**解决方案**: 
```bash
sudo chown -R $USER:$USER images/
chmod 755 images/
```

#### 3. 磁盘空间不足
```bash
❌ 磁盘空间不足
```
**解决方案**: 清理磁盘空间或删除旧的备份文件

#### 4. 图片验证失败
```bash
❌ 图片验证失败: filename.jpg
```
**解决方案**: 脚本会自动跳过损坏的图片，不影响其他图片替换

### 日志分析
```bash
# 查看详细日志
cat image-replacement.log

# 查看错误信息
grep "❌" image-replacement.log

# 查看成功信息
grep "✅" image-replacement.log
```

## 🎯 最佳实践

### 使用前准备
1. 确保网络连接稳定
2. 检查磁盘空间充足 (至少100MB)
3. 备份重要的自定义图片

### 使用后检查
1. 在浏览器中查看效果
2. 检查所有图片是否正常显示
3. 验证移动端响应式效果

### 定期维护
1. 定期清理旧的备份文件
2. 更新图片URL (如果失效)
3. 根据需要调整图片风格

## 🔄 自定义配置

### 修改图片URL
编辑脚本中的URL部分：
```bash
# 替换为您喜欢的图片URL
safe_download "YOUR_CUSTOM_URL" "filename.jpg" "描述"
```

### 调整验证参数
```bash
# 修改最小文件大小 (默认10KB)
local min_size=10000

# 修改下载超时时间 (默认30秒)
--max-time 30
```

## 📞 技术支持

如果遇到问题，请：
1. 查看日志文件 `image-replacement.log`
2. 检查备份目录是否存在
3. 验证网络连接
4. 确认文件权限

脚本设计为安全可靠，即使出现问题也可以轻松恢复！