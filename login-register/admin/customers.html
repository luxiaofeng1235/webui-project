<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¢æˆ·ç®¡ç† - é¤é¥®ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/admin/admin-common.css">
</head>
<body>
    <script src="../js/admin-layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                initCustomersPage();
            }, 100);
        });

        async function initCustomersPage() {
            adminLayout.setPageTitle('å®¢æˆ·ç®¡ç†');
            adminLayout.showLoading();
            
            try {
                const customers = await loadCustomers();
                renderCustomersPage(customers);
            } catch (error) {
                adminLayout.showError('åŠ è½½å®¢æˆ·æ•°æ®å¤±è´¥');
            }
        }

        async function loadCustomers() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve([
                        { id: 1, name: 'å¼ ä¸‰', phone: '13800138001', email: 'zhangsan@example.com', totalOrders: 25, totalAmount: 1580.50, status: 'active', registerTime: '2024-01-01' },
                        { id: 2, name: 'æå››', phone: '13800138002', email: 'lisi@example.com', totalOrders: 18, totalAmount: 980.00, status: 'active', registerTime: '2024-01-05' },
                        { id: 3, name: 'ç‹äº”', phone: '13800138003', email: 'wangwu@example.com', totalOrders: 32, totalAmount: 2150.80, status: 'vip', registerTime: '2023-12-15' },
                        { id: 4, name: 'èµµå…­', phone: '13800138004', email: 'zhaoliu@example.com', totalOrders: 5, totalAmount: 280.00, status: 'inactive', registerTime: '2024-01-10' }
                    ]);
                }, 800);
            });
        }

        function renderCustomersPage(customers) {
            const content = \`
                <div class="admin-content-card">
                    <div class="admin-content-card-header">
                        <h2 class="admin-content-card-title">ğŸ‘¥ å®¢æˆ·ç®¡ç†</h2>
                    </div>
                    <div class="admin-content-card-body">
                        <div class="admin-stats-grid" style="margin-bottom: 30px;">
                            <div class="admin-stat-card primary">
                                <h3 class="admin-stat-title">æ€»å®¢æˆ·æ•°</h3>
                                <div class="admin-stat-number">\${customers.length}</div>
                            </div>
                            <div class="admin-stat-card success">
                                <h3 class="admin-stat-title">æ´»è·ƒå®¢æˆ·</h3>
                                <div class="admin-stat-number">\${customers.filter(c => c.status === 'active').length}</div>
                            </div>
                            <div class="admin-stat-card warning">
                                <h3 class="admin-stat-title">VIPå®¢æˆ·</h3>
                                <div class="admin-stat-number">\${customers.filter(c => c.status === 'vip').length}</div>
                            </div>
                            <div class="admin-stat-card info">
                                <h3 class="admin-stat-title">æ€»æ¶ˆè´¹é¢</h3>
                                <div class="admin-stat-number">Â¥\${customers.reduce((sum, c) => sum + c.totalAmount, 0).toFixed(2)}</div>
                            </div>
                        </div>

                        <div class="admin-toolbar">
                            <div class="admin-toolbar-left">
                                <div class="admin-search-box">
                                    <span class="admin-search-icon">ğŸ”</span>
                                    <input class="admin-search-input" type="text" placeholder="æœç´¢å®¢æˆ·å§“åæˆ–æ‰‹æœºå·...">
                                </div>
                                <div class="admin-filters">
                                    <select class="admin-filter-select">
                                        <option value="">å…¨éƒ¨çŠ¶æ€</option>
                                        <option value="active">æ´»è·ƒ</option>
                                        <option value="vip">VIP</option>
                                        <option value="inactive">éæ´»è·ƒ</option>
                                    </select>
                                </div>
                            </div>
                            <div class="admin-toolbar-right">
                                <button class="btn btn-success" onclick="addCustomer()">â• æ·»åŠ å®¢æˆ·</button>
                                <button class="btn btn-primary" onclick="exportCustomers()">ğŸ“¤ å¯¼å‡ºæ•°æ®</button>
                            </div>
                        </div>

                        <table class="admin-data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>å®¢æˆ·å§“å</th>
                                    <th>è”ç³»æ–¹å¼</th>
                                    <th>è®¢å•æ•°</th>
                                    <th>æ¶ˆè´¹é‡‘é¢</th>
                                    <th>çŠ¶æ€</th>
                                    <th>æ³¨å†Œæ—¶é—´</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                \${customers.map(customer => \\\`
                                    <tr>
                                        <td><strong>#\\\${customer.id}</strong></td>
                                        <td><strong>\\\${customer.name}</strong></td>
                                        <td>
                                            <div>\\\${customer.phone}</div>
                                            <div style="font-size: 12px; color: #666;">\\\${customer.email}</div>
                                        </td>
                                        <td><span class="badge badge-info">\\\${customer.totalOrders} å•</span></td>
                                        <td><strong>Â¥\\\${customer.totalAmount.toFixed(2)}</strong></td>
                                        <td>
                                            \\\${customer.status === 'active' ? '<span class="badge badge-success">æ´»è·ƒ</span>' : 
                                               customer.status === 'vip' ? '<span class="badge badge-warning">VIP</span>' : 
                                               '<span class="badge badge-secondary">éæ´»è·ƒ</span>'}
                                        </td>
                                        <td>\\\${customer.registerTime}</td>
                                        <td>
                                            <button class="admin-action-btn primary" onclick="viewCustomer(\\\${customer.id})">æŸ¥çœ‹</button>
                                            <button class="admin-action-btn success" onclick="editCustomer(\\\${customer.id})">ç¼–è¾‘</button>
                                        </td>
                                    </tr>
                                \\\`).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            \`;
            
            adminLayout.setPageContent(content);
        }

        function addCustomer() {
            alert('æ·»åŠ å®¢æˆ·åŠŸèƒ½');
        }

        function viewCustomer(id) {
            alert(\`æŸ¥çœ‹å®¢æˆ· \${id} è¯¦æƒ…\`);
        }

        function editCustomer(id) {
            alert(\`ç¼–è¾‘å®¢æˆ· \${id}\`);
        }

        function exportCustomers() {
            alert('å¯¼å‡ºå®¢æˆ·æ•°æ®åŠŸèƒ½');
        }
    </script>
</body>
</html>
