<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿè®¾ç½® - é¤é¥®ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/admin/admin-common.css">
</head>
<body>
    <script src="../js/admin-layout.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                initSettingsPage();
            }, 100);
        });

        async function initSettingsPage() {
            adminLayout.setPageTitle('ç³»ç»Ÿè®¾ç½®');
            adminLayout.showLoading();
            
            try {
                const settings = await loadSettings();
                renderSettingsPage(settings);
            } catch (error) {
                adminLayout.showError('åŠ è½½è®¾ç½®æ•°æ®å¤±è´¥');
            }
        }

        async function loadSettings() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve({
                        restaurant: {
                            name: 'ç¾å‘³é¤å…',
                            address: 'åŒ—äº¬å¸‚æœé˜³åŒºxxxè¡—é“xxxå·',
                            phone: '010-12345678',
                            email: 'contact@restaurant.com',
                            businessHours: '09:00-22:00'
                        },
                        system: {
                            autoAcceptOrders: true,
                            orderTimeout: 30,
                            printReceipts: true,
                            enableNotifications: true
                        },
                        payment: {
                            enableCash: true,
                            enableAlipay: true,
                            enableWechat: true,
                            enableCard: false
                        }
                    });
                }, 800);
            });
        }

        function renderSettingsPage(settings) {
            const content = \`
                <div class="admin-content-card">
                    <div class="admin-content-card-header">
                        <h2 class="admin-content-card-title">âš™ï¸ ç³»ç»Ÿè®¾ç½®</h2>
                    </div>
                    <div class="admin-content-card-body">
                        <div style="display: grid; grid-template-columns: 1fr; gap: 30px;">
                            <!-- é¤å…åŸºæœ¬ä¿¡æ¯ -->
                            <div class="admin-content-card">
                                <div class="admin-content-card-header">
                                    <h3 class="admin-content-card-title">ğŸª é¤å…åŸºæœ¬ä¿¡æ¯</h3>
                                </div>
                                <div class="admin-content-card-body">
                                    <form class="admin-form" onsubmit="saveRestaurantSettings(event)">
                                        <div class="admin-form-group">
                                            <label class="admin-form-label">é¤å…åç§°</label>
                                            <input class="admin-form-control" type="text" value="\${settings.restaurant.name}" name="name">
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="admin-form-label">é¤å…åœ°å€</label>
                                            <input class="admin-form-control" type="text" value="\${settings.restaurant.address}" name="address">
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="admin-form-label">è”ç³»ç”µè¯</label>
                                            <input class="admin-form-control" type="tel" value="\${settings.restaurant.phone}" name="phone">
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="admin-form-label">é‚®ç®±åœ°å€</label>
                                            <input class="admin-form-control" type="email" value="\${settings.restaurant.email}" name="email">
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="admin-form-label">è¥ä¸šæ—¶é—´</label>
                                            <input class="admin-form-control" type="text" value="\${settings.restaurant.businessHours}" name="businessHours">
                                        </div>
                                        <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜é¤å…ä¿¡æ¯</button>
                                    </form>
                                </div>
                            </div>

                            <!-- ç³»ç»Ÿè®¾ç½® -->
                            <div class="admin-content-card">
                                <div class="admin-content-card-header">
                                    <h3 class="admin-content-card-title">ï¿½ï¿½ ç³»ç»Ÿè®¾ç½®</h3>
                                </div>
                                <div class="admin-content-card-body">
                                    <form class="admin-form" onsubmit="saveSystemSettings(event)">
                                        <div class="admin-form-group">
                                            <label class="form-check">
                                                <input type="checkbox" class="form-check-input" \${settings.system.autoAcceptOrders ? 'checked' : ''} name="autoAcceptOrders">
                                                <span class="form-check-label">è‡ªåŠ¨æ¥å—è®¢å•</span>
                                            </label>
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="admin-form-label">è®¢å•è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</label>
                                            <input class="admin-form-control" type="number" value="\${settings.system.orderTimeout}" name="orderTimeout" min="5" max="120">
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="form-check">
                                                <input type="checkbox" class="form-check-input" \${settings.system.printReceipts ? 'checked' : ''} name="printReceipts">
                                                <span class="form-check-label">è‡ªåŠ¨æ‰“å°å°ç¥¨</span>
                                            </label>
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="form-check">
                                                <input type="checkbox" class="form-check-input" \${settings.system.enableNotifications ? 'checked' : ''} name="enableNotifications">
                                                <span class="form-check-label">å¯ç”¨é€šçŸ¥æé†’</span>
                                            </label>
                                        </div>
                                        <button type="submit" class="btn btn-success">ğŸ’¾ ä¿å­˜ç³»ç»Ÿè®¾ç½®</button>
                                    </form>
                                </div>
                            </div>

                            <!-- æ”¯ä»˜è®¾ç½® -->
                            <div class="admin-content-card">
                                <div class="admin-content-card-header">
                                    <h3 class="admin-content-card-title">ğŸ’³ æ”¯ä»˜æ–¹å¼è®¾ç½®</h3>
                                </div>
                                <div class="admin-content-card-body">
                                    <form class="admin-form" onsubmit="savePaymentSettings(event)">
                                        <div class="admin-form-group">
                                            <label class="form-check">
                                                <input type="checkbox" class="form-check-input" \${settings.payment.enableCash ? 'checked' : ''} name="enableCash">
                                                <span class="form-check-label">ğŸ’µ ç°é‡‘æ”¯ä»˜</span>
                                            </label>
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="form-check">
                                                <input type="checkbox" class="form-check-input" \${settings.payment.enableAlipay ? 'checked' : ''} name="enableAlipay">
                                                <span class="form-check-label">ğŸ“± æ”¯ä»˜å®</span>
                                            </label>
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="form-check">
                                                <input type="checkbox" class="form-check-input" \${settings.payment.enableWechat ? 'checked' : ''} name="enableWechat">
                                                <span class="form-check-label">ğŸ’¬ å¾®ä¿¡æ”¯ä»˜</span>
                                            </label>
                                        </div>
                                        <div class="admin-form-group">
                                            <label class="form-check">
                                                <input type="checkbox" class="form-check-input" \${settings.payment.enableCard ? 'checked' : ''} name="enableCard">
                                                <span class="form-check-label">ğŸ’³ é“¶è¡Œå¡</span>
                                            </label>
                                        </div>
                                        <button type="submit" class="btn btn-warning">ğŸ’¾ ä¿å­˜æ”¯ä»˜è®¾ç½®</button>
                                    </form>
                                </div>
                            </div>

                            <!-- ç³»ç»Ÿä¿¡æ¯ -->
                            <div class="admin-content-card">
                                <div class="admin-content-card-header">
                                    <h3 class="admin-content-card-title">â„¹ï¸ ç³»ç»Ÿä¿¡æ¯</h3>
                                </div>
                                <div class="admin-content-card-body">
                                    <table class="admin-data-table">
                                        <tbody>
                                            <tr>
                                                <td><strong>ç³»ç»Ÿç‰ˆæœ¬</strong></td>
                                                <td>v1.0.0</td>
                                            </tr>
                                            <tr>
                                                <td><strong>æœ€åæ›´æ–°</strong></td>
                                                <td>2024-01-08</td>
                                            </tr>
                                            <tr>
                                                <td><strong>æ•°æ®åº“çŠ¶æ€</strong></td>
                                                <td><span class="badge badge-success">æ­£å¸¸</span></td>
                                            </tr>
                                            <tr>
                                                <td><strong>å­˜å‚¨ç©ºé—´</strong></td>
                                                <td>å·²ä½¿ç”¨ 2.5GB / æ€»è®¡ 10GB</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div style="margin-top: 20px;">
                                        <button class="btn btn-info" onclick="checkUpdates()">ğŸ”„ æ£€æŸ¥æ›´æ–°</button>
                                        <button class="btn btn-warning" onclick="backupData()">ğŸ’¾ å¤‡ä»½æ•°æ®</button>
                                        <button class="btn btn-danger" onclick="clearCache()">ğŸ—‘ï¸ æ¸…é™¤ç¼“å­˜</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            \`;
            
            adminLayout.setPageContent(content);
        }

        function saveRestaurantSettings(event) {
            event.preventDefault();
            alert('é¤å…ä¿¡æ¯å·²ä¿å­˜');
        }

        function saveSystemSettings(event) {
            event.preventDefault();
            alert('ç³»ç»Ÿè®¾ç½®å·²ä¿å­˜');
        }

        function savePaymentSettings(event) {
            event.preventDefault();
            alert('æ”¯ä»˜è®¾ç½®å·²ä¿å­˜');
        }

        function checkUpdates() {
            alert('æ£€æŸ¥ç³»ç»Ÿæ›´æ–°');
        }

        function backupData() {
            alert('å¼€å§‹å¤‡ä»½æ•°æ®');
        }

        function clearCache() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤ç³»ç»Ÿç¼“å­˜å—ï¼Ÿ')) {
                alert('ç¼“å­˜å·²æ¸…é™¤');
            }
        }
    </script>
</body>
</html>
